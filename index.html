<!DOCTYPE html>
<html lang="pt-br">
<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		
		<title>Portal AcheSeuEcoponto</title>
		
		<link href="https://cdn.jsdelivr.net/npm/select2@4.0.12/dist/css/select2.min.css" rel="stylesheet" />
		<script src="https://cdn.jsdelivr.net/npm/select2@4.0.12/dist/js/select2.min.js"></script>
		
		<!-- Favicon -->
		<link rel="shortcut icon" href="assets/images/favicon.ico">
		
		<!-- Bootstrap CSS -->
		<link href="assets/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
		
		<!-- Font Awesome CSS -->
		<link href="assets/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
		
		<!-- Custom CSS -->
		<link href="assets/css/style.css" rel="stylesheet" type="text/css" />
		
		<!-- BEGIN CSS for this page -->
		<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.16/css/dataTables.bootstrap4.min.css" />
		<!-- END CSS for this page -->
		
		<!--Plugin CSS file with desired skin-->
		<link rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/ion-rangeslider/2.3.0/css/ion.rangeSlider.min.css" />

		
</head>

<body class="adminbody">

<div id="main">
 
	<!-- Left Sidebar -->
	<div class="left main-sidebar">
	
		<div class="sidebar-inner leftscroll">

			<div id="sidebar-menu">
        
			<ul>
			
				<li class="submenu" id="imgLogo">
					<a href="index.html">
						<img src="assets/images/logo.png" />
					</a>
				</li>
			
				<hr />
			
				<li class="active submenu">
					<a href="index.html"><i class="fa fa-fw fa-search"></i><span> Buscar empresas </span> </a>
				</li>
			
				<li class="submenu">
					<a href="#"><i class="fa fa-fw fa-thumb-tack"></i> <span> Buscar Ecopontos </span></a>
				</li>
			
				<li class="submenu">
					<a href="sobre.html"><i class="fa fa-fw fa-user-circle"></i> <span> Quem somos </span></a>
				</li>
			
				<li class="submenu">
					<a href="#"><i class="fa fa-fw fa-list-alt"></i> <span> Materiais </span></a>
				</li>
			
				<li class="submenu">
					<a href="empresa.html"><i class="fa fa-fw fa-bullhorn"></i> <span> Cadastre sua empresa </span></a>
				</li>
			
				<li class="submenu">
					<a href="duvidas.html"><i class="fa fa-fw fa-question-circle"></i> <span> Dúvidas frequentes
						</span></a>
				</li>
			
				<li class="submenu">
					<a href="contato.html"><i class="fa fa-fw fa-comments"></i> <span> Contato </span></a>
				</li>
			
			</ul>

            <div class="clearfix"></div>

			</div>
        
			<div class="clearfix"></div>

		</div>

	</div>
	<!-- End Sidebar -->


    <div class="content-page page" style="height: 100%;" id="conteudo">
	
		<!-- Start content -->
        <div class="content" style="height: 100%;">
            
			<div class="container-fluid" style="height: 100%;" id="contMap">	
							<div class="row no-pdd" style="height: 100%;">
								<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-9 no-pdd" id="divMapa">						
									
									<button class="btn btn-primary" id="btnLista"><i class="fa fa-list"></i></button>
									
										<!-- mapa -->	
										<div class="card mb-3" id="cardMap">
											
											<div class="card-body">
												
												<div class="maparea" id="map">

												</div>
												
											</div>														
										</div><!-- end card-->
										
										<!-- lista -->
										<div class="card-body" id="cardList">
										
											<div class="card cr-empresa" style="width: 20rem;">
												<div class="card-body">
													<h4 class="card-title">Nome da Empresa</h4>
													<h6 class="card-subtitle mb-2 text-muted">Endereço</h6>
													<p class="card-text">Some quick example text to build on the card title and make up the bulk of the
														card's content.</p>
												</div>
											</div>
										
										</div><!-- end card-->
								</div>
							
							
								<!-- filtros -->
								<div class="col-xs-12 col-sm-12 col-md-12 col-lg-6 col-xl-3 no-pdd" id="filters">						
									<div class="card mb-3" id="right-filters">
											<div class="card-header">
												<i class="fa fa-fw fa-map-marker"></i>
												<p class="info">Você está em</p>
												<h3 id="endereco"><i class="fas fa-map-marker-alt"></i></h3>
												<button class="btn" id="alter">alterar</button>
											</div>
												
											<div class="card-body separate">
												<!-- materiais -->
												<div class="card mb-3">
													<div id="accordion" role="tablist">
														<div class="card">
															<div class="card-header" role="tab" id="headingOne">
																<h5 class="mb-0">
																	<a data-toggle="collapse" href="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
																		Materiais
																	</a>
																</h5>
															</div>
												
															<div id="collapseOne" class="collapse show" role="tabpanel" aria-labelledby="headingOne"
																data-parent="#accordion">
																<div class="card-body">
																	<select class="form-control select2" id="example2" name="state][]" multiple="multiple">
																		<option>Construção e Demolição</option>
																		<option>Eletrodomésticos</option>
																		<option>Eletrônicos</option>
																		<option>Embalagens e resíduos de agrotóxicos</option>
																		<option>Lâmpadas</option>
																		<option>Líquidos e Produtos Químicos</option>
																		<option>Medicamentos</option>
																		<option>Metais</option>
																		<option>Óleos</option>
																		<option>Outros</option>
																		<option>Papel e Papelão</option>
																		<option>Pilhas e Baterias</option>
																		<option>Plástico</option>
																		<option>Pneus</option>
																		<option>Vidro</option>																
																		
																	</select>
												
																</div>
															</div>
														</div>
													</div>
												</div>
												
												<!-- objetivo -->
												<div class="card mb-3">
													<div id="accordion2" role="tablist">
														<div class="card">
															<div class="card-header" role="tab" id="headingTwo">
																<h5 class="mb-0">
																	<a data-toggle="collapse" href="#collapseTwo" aria-expanded="true" aria-controls="collapseTwo">
																		Objetivo
																	</a>
																</h5>
															</div>
												
															<div id="collapseTwo" class="collapse show" role="tabpanel" aria-labelledby="headingTwo"
																data-parent="#accordion2">
																<div class="card-body">
																	<label for="cbComprar" class="btn btn-primary material" id="lbComprar">Comprar
																		<input type="checkbox" id="cbComprar" class="check-filter">
																	</label>
												
																	<label for="cbVender" class="btn btn-primary material" id="lbVender">Vender
																		<input type="checkbox" id="cbVender" class="check-filter">
																	</label>
												
																	<label for="cbDoar" class="btn btn-primary material" id="lbDoar">Doar
																		<input type="checkbox" id="cbDoar" class="check-filter">
																	</label>
												
																	<label for="cbColetar" class="btn btn-primary material" id="lbColetar">Coletar
																		<input type="checkbox" id="cbColetar" class="check-filter">
																	</label>
																</div>
															</div>
														</div>
													</div>
												</div>
												
												<!-- distância -->
												<div class="card mb-3">
													<div id="accordion3" role="tablist">
														<div class="card">
															<div class="card-header" role="tab" id="headingThree">
																<h5 class="mb-0">
																	<a data-toggle="collapse" href="#collapseThree" aria-expanded="true" aria-controls="collapseThree">
																		Distância
																	</a>
																</h5>
															</div>
												
															<div id="collapseThree" class="collapse show" role="tabpanel" aria-labelledby="headingThree"
																data-parent="#accordion3">
																<div class="card-body">
																	<div class="col-sm-10 col-xs-12" id="col_slider">
																		<input type="text" id="range_slider_1">
																	</div>
																</div>
															</div>
														</div>
													</div>
												</div>
												
												<!-- volume -->
												<div class="card mb-3">
													<div id="accordion4" role="tablist">
														<div class="card">
															<div class="card-header" role="tab" id="headingFour">
																<h5 class="mb-0">
																	<a data-toggle="collapse" href="#collapseFour" aria-expanded="true" aria-controls="collapseFour">
																		Volume
																	</a>
																</h5>
															</div>
												
															<div id="collapseFour" class="collapse show" role="tabpanel" aria-labelledby="headingFour"
																data-parent="#accordion4">
																<div class="card-body">
																	<div class="form-row">
																		<div class="form-group col-md-4">
																			<input type="text" class="form-control" id="inputCity">
																		</div>
																		<div class="form-group col-md-8">
																			<select id="inputState" class="form-control">
																				<option selected>grama(s)</option>
																				<option>quilo(s)</option>
																				<option>tonelada(s)</option>
																				<option>litro(s)</option>
																			</select>
																		</div>
																	</div>
																</div>
															</div>
														</div>
													</div>
												</div>
												
												<!-- qualidade do material -->
												<div class="card mb-3">
													<div id="accordion5" role="tablist">
														<div class="card">
															<div class="card-header" role="tab" id="headingFive">
																<h5 class="mb-0">
																	<a data-toggle="collapse" href="#collapseFive" aria-expanded="true" aria-controls="collapseFive">
																		Qualidade do Material
																	</a>
																</h5>
															</div>
												
															<div id="collapseFive" class="collapse show" role="tabpanel" aria-labelledby="headingFive"
																data-parent="#accordion5">
																<div class="card-body">
																	<label for="cbPrensado" class="btn btn-primary material" id="lbPrensado">Prensado
																		<input type="checkbox" id="cbPrensado" class="check-filter">
																	</label>
												
																	<label for="cbLimpo" class="btn btn-primary material" id="lbLimpo">Limpo
																		<input type="checkbox" id="cbLimpo" class="check-filter">
																	</label>
												
																	<label for="cbInteiro" class="btn btn-primary material" id="lbInteiro">Inteiro
																		<input type="checkbox" id="cbInteiro" class="check-filter">
																	</label>
												
																	<label for="cbCacos" class="btn btn-primary material" id="lbCacos">Cacos
																		<input type="checkbox" id="cbCacos" class="check-filter">
																	</label>
												
																	<label for="cbUnidade" class="btn btn-primary material" id="lbUnidade">Unidade
																		<input type="checkbox" id="cbUnidade" class="check-filter">
																	</label>
												
																	<label for="cbTriturado" class="btn btn-primary material" id="lbTriturado">Triturado
																		<input type="checkbox" id="cbTriturado" class="check-filter">
																	</label>
																</div>
															</div>
														</div>
													</div>
												</div>
												
											</div>
									</div><!-- end card-->					
								</div>
									
							</div>			



            </div>
			<!-- END container-fluid -->

		</div>
		<!-- END content -->

    </div>
	<!-- END content-page -->

</div>
<!-- END main -->

<script src="assets/js/modernizr.min.js"></script>
	<script src="assets/js/jquery.min.js"></script>
	<script src="assets/js/moment.min.js"></script>

	<script src="assets/js/popper.min.js"></script>
	<script src="assets/js/bootstrap.min.js"></script>

	<script src="assets/js/detect.js"></script>
	<script src="assets/js/fastclick.js"></script>
	<script src="assets/js/jquery.blockUI.js"></script>
	<script src="assets/js/jquery.nicescroll.js"></script>

	<!-- App js -->
	<script src="assets/js/pikeadmin.js"></script>

	<!-- BEGIN Java Script for this page -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>
	<script src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>
	<script src="https://cdn.datatables.net/1.10.16/js/dataTables.bootstrap4.min.js"></script>

	<script type="text/javascript" src="assets/js/script.js"></script>

	<!-- Counter-Up-->
	<script src="assets/plugins/waypoints/lib/jquery.waypoints.min.js"></script>
	<script src="assets/plugins/counterup/jquery.counterup.min.js"></script>

	<script>
		$(document).ready(function () {


			// data-tables
			$('#example1').DataTable();

			// counter-up
			$('.counter').counterUp({
				delay: 10,
				time: 600
			});
		});		
	</script>
	<!-- END Java Script for this page -->
	<!-- BEGIN Java Script for this page -->
	<script src="assets/plugins/select2/js/select2.min.js"></script>

	<!--Plugin JavaScript file-->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/ion-rangeslider/2.3.0/js/ion.rangeSlider.min.js"></script>
	<script>
		$(document).ready(function () {
			$("#range_slider_1").ionRangeSlider();

			$('.select2').select2();
		});
	</script>
	<!-- END Java Script for this page -->

	<!-- BEGIN Java Script for this page -->
	<script src="//maps.google.com/maps/api/js?key=AIzaSyBMM4FSTN2KrlYBuJpoBhGE9S-V6L8BRjg&callback=initMap"></script>
	<script src="assets/plugins/gmapsjs/gmaps.js"></script>
	<script>
		var geocoder;
		var map;
		var marker;
		var markers = [];
		var directionsDisplay;
		var ender;
		var posicaoAtual;
		var posicaoGeo;
		var longAtual;
		var latAtual;
		var enderecoAtual;
		var latGeo;
		var longGeoo;
		var enderecoGeo;
		var ponto;
		var directionsService = new google.maps.DirectionsService();
		var directionsDisplay = new google.maps.DirectionsRenderer();
		var markerCluster;
		var rresultado;
		var confMapa;
		var map;

		$(document).ready(function () {
			if (navigator.geolocation) {
				var resp;

				marker = new google.maps.Marker({
					map: map,
					draggable: true,
				});
				
				//getCurrentPosition pega a localização do usuário uma vez
				//o retorno position é quando se teve sucesso 
				navigator.geolocation.getCurrentPosition(function (position) {
					//passa as coordenadas retornadas da localização atual para a instancia posicaoatual

					latGeo = position.coords.latitude; //armazena para depois transferir para a latAtual se for confirmada pelo usuário sua localização automática
					longGeo = position.coords.longitude;
					$txtLatitude = position.coords.latitude; //armazena para depois transferir para a latAtual se for confirmada pelo usuário sua localização automática
					$txtLongitude = position.coords.longitude;

					posicaoGeo = new google.maps.LatLng(latGeo, longGeo);

					marker.setPosition(new google.maps.LatLng(position.coords.latitude, position.coords.longitude));
					map.setCenter(posicaoGeo);

					//cria uma instancia do geocoder e codifica a localização atual para o endereço formatado 
					var geocoder = new google.maps.Geocoder();

					geocoder.geocode({ 'location': posicaoGeo }, function (results, status) {
						if (status == google.maps.GeocoderStatus.OK && results[0]) {
							$('.campos .localizacao').text(results[0].formatted_address);
							enderecoGeo = results[0].formatted_address;
						}
						document.getElementById("endereco").innerHTML = enderecoGeo;

					});


					confMapa =
						{
							disableDefaultUI: true,
							center: posicaoGeo,
							zoom: 10,
							mapTypeId: google.maps.MapTypeId.ROADMAP   //ROADMAP: exibe os blocos 2D (rodoviário)--- SATELLITE exibe os blocos fotográficos (Google Earth)--- HYBRID: exibe uma mistura de blocos fotográficos e uma camada de blocos para recursos de destaque (rodovias, nomes de cidade) TERRAIN: exibe blocos de relevo físico para exibir recursos de elevação e água (montanhas, rios etc.) mapa físico com base nas informações do terreno. 
						};

					//google.maps.event.addDomListener(window, 'load', initialize);//ver erro
					map = new google.maps.Map(document.getElementById("mapa"), confMapa);
					directionsDisplay = new google.maps.DirectionsRenderer();
					directionsDisplay.setMap(map);



					//adiciona o ponto no mapa
					marker = new google.maps.Marker(
						{
							position: posicaoGeo,
							map: map,
							zoom: 10,
							draggable: true, //permite mover ----- depois permitir
							title: "Sua localização atual",
							icon: "/images/posicao.png"
						});

					//cria uma janela com informações da localização atual do usuário
					infoWindow = new google.maps.InfoWindow();
					html = "Sua Localização e Ponto de Origem";
					google.maps.event.addListener(marker, 'click', function () {
						infoWindow.setContent(html);
						infoWindow.open(map, marker);
					});
				});
			}
			else {
				alert("Navegador não tem suporte para geolocalização!  Informe seu endereço manualmente");
			}
			
			if (latGeo == null) {
				posicaoGeo = new google.maps.LatLng(-23.5009757, -47.458314900000005);
				latGeo = -23.5009757;
				longGeo = -47.458314900000005;
				$txtLatitude = -23.5009757;
				$txtLongitude = -47.458314900000005;

				//cria uma instancia do geocoder e codifica a localização atual para o endereço formatado 
				var geocoder = new google.maps.Geocoder();

				geocoder.geocode({ 'location': posicaoGeo }, function (results, status) {
					if (status == google.maps.GeocoderStatus.OK && results[0]) {
						$('.campos .localizacao').text(results[0].formatted_address);
						enderecoGeo = results[0].formatted_address;
					}
				});

				confMapa =
					{
						disableDefaultUI: true,
						center: posicaoGeo,
						zoom: 10,
						mapTypeId: google.maps.MapTypeId.ROADMAP   //ROADMAP: exibe os blocos 2D (rodoviário)--- SATELLITE exibe os blocos fotográficos (Google Earth)--- HYBRID: exibe uma mistura de blocos fotográficos e uma camada de blocos para recursos de destaque (rodovias, nomes de cidade) TERRAIN: exibe blocos de relevo físico para exibir recursos de elevação e água (montanhas, rios etc.) mapa físico com base nas informações do terreno. 
					};

				//google.maps.event.addDomListener(window, 'load', initialize);//ver erro
				map = new google.maps.Map(document.getElementById("map"), confMapa);
				directionsDisplay = new google.maps.DirectionsRenderer();
				directionsDisplay.setMap(map);

				//adiciona o ponto no mapa
				marker = new google.maps.Marker(
					{
						position: posicaoGeo,
						map: map,
						zoom: 10,
						draggable: false, //permite mover ----- depois permitir
						title: "Sua localização atual",
						icon: "assets/images/pin.png",
					});

				//cria uma janela com informações da localização atual do usuário
				infoWindow = new google.maps.InfoWindow();
				html = "Sua Localização e Ponto de Origem";
				google.maps.event.addListener(marker, 'click', function () {
					infoWindow.setContent(html);
					infoWindow.open(map, marker);
				});
			}
		});
	</script>

</body>
</html>